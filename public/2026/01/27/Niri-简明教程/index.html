<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Qaaxaap,lkn15289353760@126.com"><title>Niri 简明教程 · Qaaxaap</title><meta name="description" content="写的匆忙，稍后再完善

安装环境这里假设你已经安装了 Arch，并且有至少一个 AUR Helper（如 paru,yay）。这里笔者使用 yay，所以如果你不使用 yay 请自行替换命令，相信对于 Arch 用户应该不难。
安装前准备请先更新系统再进行后续操作
1yay -Syu

需下载如下软件"><meta name="keywords" content="OI,C++,Linux,HTML,Codeforces"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 8.1.1"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Qaaxaap</a></h3><div class="description"><p>「Gott ist tot」</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="http://github.com/951753yyswys"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a target="_blank" rel="noopener" href="https://www.caicai.me"> CaiCai </a><span>&</span><a target="_blank" rel="noopener" href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Niri 简明教程</a></h3></div><div class="post-content"><p>写的匆忙，稍后再完善</p>
<hr>
<h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><p>这里假设你已经安装了 Arch，并且有至少一个 AUR Helper（如 paru,yay）。<br>这里笔者使用 yay，所以如果你不使用 yay 请自行替换命令，相信对于 Arch 用户应该不难。</p>
<h2 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h2><p>请先更新系统再进行后续操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -Syu</span><br></pre></td></tr></table></figure>

<p>需下载如下软件包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S niri xdg-desktop-portal-gtk xdg-desktop-portal-gnome alacritty swaybg swayidle hyprlock xwayland-satellite dolphin sddm brightnessctl wireplumber grim flameshot breeze wshowkeys-git fcitx5 fcitx5-qt fcitx5-chinese-addons blueman noto-fonts libnotify pipewire pipewire-pulse</span><br><span class="line">yay -S noctalia-shell vicinae ttf-jetbrains-mono misans</span><br></pre></td></tr></table></figure>

<p>Noctalia Shell 是一个使用 Material Design 的用户界面。它可以接管系统通知，声音和显示亮度调节，并且我们的状态栏是它提供的，不使用 waybar。</p>
<p>Vicinae 是启动应用用的，类似于 Hyprland 里单独按下 Super 键的功能</p>
<h2 id="配置-systemd"><a href="#配置-systemd" class="headerlink" title="配置 systemd"></a>配置 systemd</h2><p>如果你之前没有使用 sddm 作为登录管理器，请启用它，如果你什么都不知道，那你大概率已经启用了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> sddm.service</span><br></pre></td></tr></table></figure>

<p>然后写一个 swayidle 的 service</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.config/systemd/user/swayidle.service </span><br></pre></td></tr></table></figure>

<p>在里面粘贴</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">PartOf=graphical-session.target</span><br><span class="line">After=graphical-session.target</span><br><span class="line">Requisite=graphical-session.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/bin/swayidle -w timeout 601 &#x27;niri msg action power-off-monitors&#x27; timeout 600 &#x27;hyprlock&#x27; before-sleep &#x27;hyprlock&#x27;</span><br><span class="line">Restart=on-failure</span><br></pre></td></tr></table></figure>

<p>意思是无操作 600 秒则 hyprlock 锁屏，601 秒关闭显示操作器，更多操作见 swaylock 官方文档。</p>
<p>接下来编辑 niri 的 wants，类似于依赖项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --user add-wants niri.service swayidle.service</span><br></pre></td></tr></table></figure>

<p>这可以让 swayidle 自动接管锁屏、睡眠等操作</p>
<p><strong>注意：不要按照很多教程启用 waybar 和 mako，我们不用它！</strong></p>
<p>接下来创建 niri 配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.config/niri/config.kdl</span><br></pre></td></tr></table></figure>

<p>然后写入如下内容，注意不要全抄，看注释修改要改的地方</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br></pre></td><td class="code"><pre><span class="line">// 键盘鼠标触摸板等输入设备相关配置</span><br><span class="line">input &#123;</span><br><span class="line">    keyboard &#123;</span><br><span class="line">        xkb &#123;</span><br><span class="line">            layout <span class="string">&quot;us&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 在启动上启用numlock，省略此设置会禁用它。</span><br><span class="line">        numlock</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    touchpad &#123;</span><br><span class="line">        tap</span><br><span class="line">        natural-scroll</span><br><span class="line">        scroll-method <span class="string">&quot;two-finger&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mouse &#123;</span><br><span class="line">        // 设置鼠标移动速度,-1到1之间由慢到快</span><br><span class="line">        accel-speed 1</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // niri默认接管电源按钮的功能是<span class="built_in">sleep</span>,这里禁用以使用关机功能</span><br><span class="line">    disable-power-key-handling</span><br><span class="line">    // 切换mod键：正常使用alt，嵌套窗口内使用Super。</span><br><span class="line">    mod-key <span class="string">&quot;Super&quot;</span></span><br><span class="line">    mod-key-nested <span class="string">&quot;Alt&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 可以在niri实例中运行`niri msg outputs`找到显示器名称。</span><br><span class="line">output <span class="string">&quot;HDMI&quot;</span> &#123;</span><br><span class="line">    // 取消注释以禁用此显示器。</span><br><span class="line">    off</span><br><span class="line"></span><br><span class="line">    // 默认聚焦在这个显示器</span><br><span class="line">    focus-at-startup</span><br><span class="line"></span><br><span class="line">    // 格式为<span class="string">&quot;&lt;width&gt;x&lt;height&gt;&quot;</span> 或者 <span class="string">&quot;&lt;width&gt;x&lt;height&gt;@&lt;refresh rate&gt;&quot;</span>.</span><br><span class="line">    // 如果省略了刷新率，niri将为分辨率选择最高的刷新率。</span><br><span class="line">    mode <span class="string">&quot;3840x2160@60.000&quot;</span></span><br><span class="line"></span><br><span class="line">    // 您可以使用整数或分数量表，例如，比例为150％。</span><br><span class="line">    scale 2</span><br><span class="line"></span><br><span class="line">    // transform允许逆时针旋转显示，有效值为:</span><br><span class="line">    // normal, 90, 180, 270, flipped, flipped-90, flipped-180 and flipped-270.</span><br><span class="line">    transform <span class="string">&quot;normal&quot;</span></span><br><span class="line"></span><br><span class="line">    // 输出在所有显示器坐标空间中的位置。未明确配置位置的显示器将放置在所有已放置的显示器右侧。</span><br><span class="line">    // position x=1280 y=0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 如果 eDP-2 没有连接，将会默认聚焦在这个显示器</span><br><span class="line">output <span class="string">&quot;eDP-2&quot;</span> &#123;</span><br><span class="line">    // off</span><br><span class="line">    focus-at-startup</span><br><span class="line">    mode <span class="string">&quot;2560x1600@300.000&quot;</span></span><br><span class="line">    transform <span class="string">&quot;normal&quot;</span></span><br><span class="line">    position x=0 y=0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 可以使用wev来查询特定的按键对应的XKB名称</span><br><span class="line">binds &#123;</span><br><span class="line">    Alt+Tab &#123; spawn <span class="string">&quot;niri-switch&quot;</span>; &#125;</span><br><span class="line">    // Mod-Shift-/显示重要的热键列表(通常与 Mod-? 相同)。</span><br><span class="line">    Mod+Shift+Slash &#123; show-hotkey-overlay; &#125;</span><br><span class="line">    Mod+D hotkey-overlay-title=<span class="string">&quot;Open the File Manager&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/dolphin&quot;</span>; &#125;</span><br><span class="line">    // Mod+L hotkey-overlay-title=<span class="string">&quot;Lock the Screen: swaylock&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/swaylock&quot;</span> <span class="string">&quot;-f&quot;</span> <span class="string">&quot;-i&quot;</span> <span class="string">&quot;<span class="variable">$HOME</span>/.dotfiles/sway/.config/sway/lock.png&quot;</span>; &#125;</span><br><span class="line">    Mod+L hotkey-overlay-title=<span class="string">&quot;Lock the Screen: hyprlock&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/hyprlock&quot;</span>; &#125;</span><br><span class="line">    Mod+Return hotkey-overlay-title=<span class="string">&quot;Open a Terminal&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/kitty&quot;</span>; &#125;</span><br><span class="line">   // Mod+A hotkey-overlay-title=<span class="string">&quot;Run an Application&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/fuzzel&quot;</span>; &#125;</span><br><span class="line">    Mod+A hotkey-overlay-title=<span class="string">&quot;Run an Application&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/vicinae&quot;</span> <span class="string">&quot;toggle&quot;</span>; &#125;</span><br><span class="line">    Mod+X hotkey-overlay-title=<span class="string">&quot;Open a browser: zen&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/google-chrome-stable&quot;</span>; &#125;</span><br><span class="line">    // Mod+D hotkey-overlay-title=<span class="string">&quot;同步切换obs和mpv状态&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/touch&quot;</span> <span class="string">&quot;/tmp/obs_mpv_toggle_pause&quot;</span>; &#125;</span><br><span class="line">    Mod+K hotkey-overlay-title=<span class="string">&quot;打开screenkey&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/wshowkeys&quot;</span> <span class="string">&quot;-a&quot;</span> <span class="string">&quot;right&quot;</span> <span class="string">&quot;-a&quot;</span> <span class="string">&quot;bottom&quot;</span> <span class="string">&quot;-F&quot;</span> <span class="string">&quot;ComicShannsMono Nerd Font 30&quot;</span>; &#125;</span><br><span class="line">    Mod+Shift+K hotkey-overlay-title=<span class="string">&quot;关闭screenkey&quot;</span> &#123; spawn <span class="string">&quot;/usr/bin/killall&quot;</span> <span class="string">&quot;wshowkeys&quot;</span>; &#125;</span><br><span class="line">    // Mod+Shift+C hotkey-overlay-title=<span class="string">&quot;重启waybar&quot;</span> &#123; spawn-sh <span class="string">&quot;pkill waybar &amp;&amp; waybar&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">    // 音量控制 allow-when-locked=<span class="literal">true</span> 在锁屏时的按键也会生效。这里的wpctl是wireplumber包中附带的</span><br><span class="line">    XF86AudioRaiseVolume allow-when-locked=<span class="literal">true</span> &#123; spawn-sh <span class="string">&quot;wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1+&quot;</span>; &#125;</span><br><span class="line">    XF86AudioLowerVolume allow-when-locked=<span class="literal">true</span> &#123; spawn-sh <span class="string">&quot;wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1-&quot;</span>; &#125;</span><br><span class="line">    XF86AudioMute        allow-when-locked=<span class="literal">true</span> &#123; spawn-sh <span class="string">&quot;wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle&quot;</span>; &#125;</span><br><span class="line">    XF86AudioMicMute     allow-when-locked=<span class="literal">true</span> &#123; spawn-sh <span class="string">&quot;wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">    // 亮度控制。brightnessctl 有独立的包</span><br><span class="line">    XF86MonBrightnessUp allow-when-locked=<span class="literal">true</span> &#123; spawn <span class="string">&quot;brightnessctl&quot;</span> <span class="string">&quot;set&quot;</span> <span class="string">&quot;+10%&quot;</span>; &#125;</span><br><span class="line">    XF86MonBrightnessDown allow-when-locked=<span class="literal">true</span> &#123; spawn <span class="string">&quot;brightnessctl&quot;</span> <span class="string">&quot;set&quot;</span> <span class="string">&quot;10%-&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">    // 开关overview</span><br><span class="line">    Mod+Tab repeat=<span class="literal">false</span> &#123; toggle-overview; &#125;</span><br><span class="line">    // 关闭窗口</span><br><span class="line">    Mod+Q repeat=<span class="literal">false</span> &#123; close-window; &#125;</span><br><span class="line"></span><br><span class="line">    // 窗口焦点切换，位置移动</span><br><span class="line">    Mod+Left  &#123; focus-column-left; &#125;</span><br><span class="line">    Mod+Down  &#123; focus-window-down; &#125;</span><br><span class="line">    Mod+Up    &#123; focus-window-up; &#125;</span><br><span class="line">    Mod+Right &#123; focus-column-right; &#125;</span><br><span class="line">    Mod+N     &#123; focus-column-left; &#125;</span><br><span class="line">    Mod+i     &#123; focus-column-right; &#125;</span><br><span class="line">    Mod+Alt+Left &#123; consume-or-expel-window-left; &#125;</span><br><span class="line">    Mod+Alt+Right &#123;consume-or-expel-window-right; &#125;</span><br><span class="line">    // Mod+N     &#123; spawn-sh <span class="string">&quot;niri msg action focus-column-left &amp;&amp; niri msg action center-column&quot;</span>; &#125;</span><br><span class="line">    // Mod+i     &#123; spawn-sh <span class="string">&quot;niri msg action focus-column-right &amp;&amp; niri msg action center-column&quot;</span>; &#125;</span><br><span class="line">    Mod+Shift+Left  &#123; move-column-left; &#125;</span><br><span class="line">    Mod+Shift+Down  &#123; move-window-down; &#125;</span><br><span class="line">    Mod+Shift+Up    &#123; move-window-up; &#125;</span><br><span class="line">    Mod+Shift+Right &#123; move-column-right; &#125;</span><br><span class="line">    Mod+Shift+N     &#123; move-column-left; &#125;</span><br><span class="line">    Mod+Shift+I     &#123; move-column-right; &#125;</span><br><span class="line"></span><br><span class="line">    Mod+Home &#123; focus-column-first; &#125;</span><br><span class="line">    Mod+End  &#123; focus-column-last; &#125;</span><br><span class="line">    Mod+Shift+Home &#123; move-column-to-first; &#125;</span><br><span class="line">    Mod+Shift+End  &#123; move-column-to-last; &#125;</span><br><span class="line"></span><br><span class="line">    // workspace焦点切换，窗口在workspace之间移动</span><br><span class="line">    Mod+Page_Down      &#123; focus-workspace-down; &#125;</span><br><span class="line">    Mod+Page_Up        &#123; focus-workspace-up; &#125;</span><br><span class="line">    Mod+Ctrl+Page_Down &#123; move-column-to-workspace-down; &#125;</span><br><span class="line">    Mod+Ctrl+Page_Up   &#123; move-column-to-workspace-up; &#125;</span><br><span class="line">    // 上下移动整个workspace</span><br><span class="line">    Mod+Shift+Page_Down &#123; move-workspace-down; &#125;</span><br><span class="line">    Mod+Shift+Page_Up   &#123; move-workspace-up; &#125;</span><br><span class="line"></span><br><span class="line">    // 上下方向共用的窗口、工作空间的焦点切换和位置移动</span><br><span class="line">    Mod+E     &#123; focus-window-or-workspace-down; &#125;</span><br><span class="line">    Mod+U     &#123; focus-window-or-workspace-up; &#125;</span><br><span class="line">    Mod+Shift+E     &#123; move-window-down-or-to-workspace-down; &#125;</span><br><span class="line">    Mod+Shift+U     &#123; move-window-up-or-to-workspace-up; &#125;</span><br><span class="line"></span><br><span class="line">    // 显示器焦点切换</span><br><span class="line">    Mod+Ctrl+Left  &#123; focus-monitor-left; &#125;</span><br><span class="line">    Mod+Ctrl+Down  &#123; focus-monitor-down; &#125;</span><br><span class="line">    Mod+Ctrl+Up    &#123; focus-monitor-up; &#125;</span><br><span class="line">    Mod+Ctrl+Right &#123; focus-monitor-right; &#125;</span><br><span class="line">    Mod+Ctrl+N     &#123; focus-monitor-left; &#125;</span><br><span class="line">    Mod+Ctrl+E     &#123; focus-monitor-down; &#125;</span><br><span class="line">    Mod+Ctrl+U     &#123; focus-monitor-up; &#125;</span><br><span class="line">    Mod+Ctrl+I     &#123; focus-monitor-right; &#125;</span><br><span class="line"></span><br><span class="line">    // 跨显示器移动窗口</span><br><span class="line">    Mod+Shift+Ctrl+Left  &#123; move-column-to-monitor-left; &#125;</span><br><span class="line">    Mod+Shift+Ctrl+Down  &#123; move-column-to-monitor-down; &#125;</span><br><span class="line">    Mod+Shift+Ctrl+Up    &#123; move-column-to-monitor-up; &#125;</span><br><span class="line">    Mod+Shift+Ctrl+Right &#123; move-column-to-monitor-right; &#125;</span><br><span class="line">    Mod+Shift+Ctrl+N     &#123; move-column-to-monitor-left; &#125;</span><br><span class="line">    Mod+Shift+Ctrl+E     &#123; move-column-to-monitor-down; &#125;</span><br><span class="line">    Mod+Shift+Ctrl+U     &#123; move-column-to-monitor-up; &#125;</span><br><span class="line">    Mod+Shift+Ctrl+I     &#123; move-column-to-monitor-right; &#125;</span><br><span class="line"></span><br><span class="line">    // 鼠标相关快捷键</span><br><span class="line">    Mod+WheelScrollDown      cooldown-ms=150 &#123; focus-workspace-down; &#125;</span><br><span class="line">    Mod+WheelScrollUp        cooldown-ms=150 &#123; focus-workspace-up; &#125;</span><br><span class="line">    Mod+Ctrl+WheelScrollDown cooldown-ms=150 &#123; move-column-to-workspace-down; &#125;</span><br><span class="line">    Mod+Ctrl+WheelScrollUp   cooldown-ms=150 &#123; move-column-to-workspace-up; &#125;</span><br><span class="line"></span><br><span class="line">    Mod+WheelScrollRight      &#123; focus-column-right; &#125;</span><br><span class="line">    Mod+WheelScrollLeft       &#123; focus-column-left; &#125;</span><br><span class="line">    Mod+Ctrl+WheelScrollRight &#123; move-column-right; &#125;</span><br><span class="line">    Mod+Ctrl+WheelScrollLeft  &#123; move-column-left; &#125;</span><br><span class="line"></span><br><span class="line">    Mod+Shift+WheelScrollDown      &#123; focus-column-right; &#125;</span><br><span class="line">    Mod+Shift+WheelScrollUp        &#123; focus-column-left; &#125;</span><br><span class="line">    Mod+Ctrl+Shift+WheelScrollDown &#123; move-column-right; &#125;</span><br><span class="line">    Mod+Ctrl+Shift+WheelScrollUp   &#123; move-column-left; &#125;</span><br><span class="line"></span><br><span class="line">    Mod+TouchpadScrollDown &#123; spawn-sh <span class="string">&quot;wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.02+&quot;</span>; &#125;</span><br><span class="line">    Mod+TouchpadScrollUp   &#123; spawn-sh <span class="string">&quot;wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.02-&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">    Mod+1 &#123; focus-workspace 1; &#125;</span><br><span class="line">    Mod+2 &#123; focus-workspace 2; &#125;</span><br><span class="line">    Mod+3 &#123; focus-workspace 3; &#125;</span><br><span class="line">    Mod+4 &#123; focus-workspace 4; &#125;</span><br><span class="line">    Mod+5 &#123; focus-workspace 5; &#125;</span><br><span class="line">    Mod+6 &#123; focus-workspace 6; &#125;</span><br><span class="line">    Mod+7 &#123; focus-workspace 7; &#125;</span><br><span class="line">    Mod+8 &#123; focus-workspace 8; &#125;</span><br><span class="line">    Mod+9 &#123; focus-workspace 9; &#125;</span><br><span class="line">    Mod+0 &#123; focus-workspace 10; &#125;</span><br><span class="line">    Mod+Shift+1 &#123; move-column-to-workspace 1; &#125;</span><br><span class="line">    Mod+Shift+2 &#123; move-column-to-workspace 2; &#125;</span><br><span class="line">    Mod+Shift+3 &#123; move-column-to-workspace 3; &#125;</span><br><span class="line">    Mod+Shift+4 &#123; move-column-to-workspace 4; &#125;</span><br><span class="line">    Mod+Shift+5 &#123; move-column-to-workspace 5; &#125;</span><br><span class="line">    Mod+Shift+6 &#123; move-column-to-workspace 6; &#125;</span><br><span class="line">    Mod+Shift+7 &#123; move-column-to-workspace 7; &#125;</span><br><span class="line">    Mod+Shift+8 &#123; move-column-to-workspace 8; &#125;</span><br><span class="line">    Mod+Shift+9 &#123; move-column-to-workspace 9; &#125;</span><br><span class="line">    Mod+Shift+0 &#123; move-column-to-workspace 10; &#125;</span><br><span class="line"></span><br><span class="line">    // 最大化和全屏</span><br><span class="line">    Mod+W &#123; toggle-windowed-fullscreen; &#125;</span><br><span class="line">    Mod+F &#123; expand-column-to-available-width; &#125;</span><br><span class="line">    Mod+Shift+F &#123; fullscreen-window; &#125;</span><br><span class="line"></span><br><span class="line">    // 未最大化的窗口居中</span><br><span class="line">    Mod+C &#123; center-column; &#125;</span><br><span class="line">    Mod+Ctrl+C &#123; center-visible-columns; &#125;</span><br><span class="line"></span><br><span class="line">    // 在layout中预设的宽度和高度之间切换</span><br><span class="line">    Mod+R &#123; switch-preset-column-width; &#125;</span><br><span class="line">    Mod+Shift+R &#123; switch-preset-window-height; &#125;</span><br><span class="line">    // 改变宽度单位可以有pixels、百分比</span><br><span class="line">    Mod+Minus &#123; set-column-width <span class="string">&quot;-10%&quot;</span>; &#125;</span><br><span class="line">    Mod+Equal &#123; set-column-width <span class="string">&quot;+10%&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">    // 改变高度</span><br><span class="line">    Mod+Shift+Minus &#123; set-window-height <span class="string">&quot;-10%&quot;</span>; &#125;</span><br><span class="line">    Mod+Shift+Equal &#123; set-window-height <span class="string">&quot;+10%&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">    // 切换悬浮窗，改变平铺和悬浮窗焦点</span><br><span class="line">    Mod+Shift+Space       &#123; toggle-window-floating; &#125;</span><br><span class="line">    Mod+Space &#123; switch-focus-between-floating-and-tiling; &#125;</span><br><span class="line"></span><br><span class="line">    // 截图</span><br><span class="line">    Alt+J &#123; spawn-sh <span class="string">&quot;grim -g \&quot;<span class="subst">$(slurp)</span>\&quot; - | satty --filename - --output-filename ~/<span class="subst">$(date &#x27;+%Y%m%d-%H:%M:%S&#x27;)</span>.png&quot;</span>; &#125;</span><br><span class="line">    Alt+Shift+J &#123; spawn <span class="string">&quot;flameshot&quot;</span> <span class="string">&quot;gui&quot;</span>; &#125;</span><br><span class="line">    Print &#123; screenshot show-pointer=<span class="literal">false</span>; &#125;</span><br><span class="line">    Ctrl+Print &#123; screenshot-screen write-to-disk=<span class="literal">true</span>; &#125;</span><br><span class="line">    Alt+Print &#123; screenshot-window write-to-disk=<span class="literal">true</span>; &#125;</span><br><span class="line"></span><br><span class="line">    // 针对虚拟机软件可能需要键盘控制权。allow-inhibiting=<span class="literal">false</span> 忽略当前快捷键本身</span><br><span class="line">    Mod+Escape allow-inhibiting=<span class="literal">false</span> &#123; toggle-keyboard-shortcuts-inhibit; &#125;</span><br><span class="line"></span><br><span class="line">    // 退出niri将显示一个确认对话框，以避免意外退出。</span><br><span class="line">    Mod+Shift+Q &#123; quit; &#125;</span><br><span class="line"></span><br><span class="line">    // 关闭显示器。移动鼠标或按下任意按键恢复</span><br><span class="line">    Mod+Shift+P &#123; power-off-monitors; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 影响窗口的位置和尺寸的设置。</span><br><span class="line">layout &#123;</span><br><span class="line">    // 在逻辑像素中设置Windows周围的缝隙。</span><br><span class="line">    gaps 10</span><br><span class="line">    background-color <span class="string">&quot;transparent&quot;</span></span><br><span class="line">    // 存在多个窗口时，未最大化的窗口不自动居中，方便分屏</span><br><span class="line">    center-focused-column <span class="string">&quot;never&quot;</span></span><br><span class="line">    // 只有一个窗口时自动居中显示</span><br><span class="line">    always-center-single-column</span><br><span class="line"></span><br><span class="line">    // mod+r在预设之间切换的宽度。</span><br><span class="line">    preset-column-widths &#123;</span><br><span class="line">        proportion 0.5</span><br><span class="line">        proportion 0.2444</span><br><span class="line">        proportion 0.7556</span><br><span class="line">        // 固定设置逻辑像素的宽度精确设置。（受scale影响）</span><br><span class="line">        // fixed 1920</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    preset-window-heights &#123;</span><br><span class="line">        proportion 0.5</span><br><span class="line">        proportion 0.8</span><br><span class="line">        proportion 1.0</span><br><span class="line">    &#125;</span><br><span class="line">    // 关闭聚焦框</span><br><span class="line">    focus-ring &#123;</span><br><span class="line">        // off</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 关闭边框</span><br><span class="line">    border &#123;</span><br><span class="line">        off</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 覆盖由niri启动的进程的环境变量</span><br><span class="line">environment &#123;</span><br><span class="line">    QT_QPA_PLATFORMTHEME <span class="string">&quot;qt5ct&quot;</span></span><br><span class="line">    ALL_PROXY <span class="string">&quot;http://127.0.0.1:7890&quot;</span></span><br><span class="line">    LANG <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_CTYPE <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_NUMERIC <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_TIME <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_COLLATE <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_MONETARY <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_MESSAGES <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_PAPER <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_NAME <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_ADDRESS <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_TELEPHONE <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_MEASUREMENT <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_IDENTIFICATION <span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">    LC_ALL null</span><br><span class="line">    // XDG_DATA_DIRS <span class="string">&quot;<span class="variable">$HOME</span>/.local/share&quot;</span> <span class="string">&quot;<span class="variable">$XDG_DATA_DIRS</span>&quot;</span></span><br><span class="line">    // GTK_IM_MODULE <span class="string">&quot;fcitx&quot;</span></span><br><span class="line">    QT_IM_MODULE <span class="string">&quot;fcitx&quot;</span></span><br><span class="line">    // https://fcitx-im.org/wiki/Using_Fcitx_5_on_Wayland#Sway</span><br><span class="line">    XMODIFIERS <span class="string">&quot;@im=fcitx&quot;</span></span><br><span class="line">    QT_IM_MODULES <span class="string">&quot;wayland;fcitx&quot;</span></span><br><span class="line">    GTK_IM_MODULE null</span><br><span class="line">    SDL_IM_MODULE null</span><br><span class="line">    GLFW_IM_MODULE null</span><br><span class="line">&#125;</span><br><span class="line">spawn-at-startup <span class="string">&quot;niri-switch-daemon&quot;</span></span><br><span class="line"></span><br><span class="line">// 启动niri时自动启动的软件</span><br><span class="line">spawn-at-startup <span class="string">&quot;/usr/bin/fcitx5&quot;</span></span><br><span class="line">// spawn-at-startup <span class="string">&quot;/usr/bin/v2rayn&quot;</span></span><br><span class="line">// spawn-at-startup <span class="string">&quot;/usr/bin/waybar&quot;</span></span><br><span class="line">spawn-at-startup <span class="string">&quot;/usr/bin/vicinae&quot;</span> <span class="string">&quot;server&quot;</span></span><br><span class="line">spawn-at-startup <span class="string">&quot;~/.cargo/bin/soteria&quot;</span></span><br><span class="line">spawn-at-startup <span class="string">&quot;~/Desktop/tools/update_repositories.sh&quot;</span></span><br><span class="line">spawn-at-startup <span class="string">&quot;qs&quot;</span> <span class="string">&quot;-c&quot;</span> <span class="string">&quot;noctalia-shell&quot;</span></span><br><span class="line">spawn-at-startup <span class="string">&quot;/usr/bin/hyprlock&quot;</span></span><br><span class="line">// 要运行shell命令（带有变量，管道等），请使用spawn-sh-at-at-startup：</span><br><span class="line">spawn-sh-at-startup <span class="string">&quot;swaybg -i /home/Qaaxaap/Pictures/wallpaper.png -m fill&quot;</span></span><br><span class="line"></span><br><span class="line">hotkey-overlay &#123;</span><br><span class="line">    // 跳过“重要的热键”弹出窗口。</span><br><span class="line">    skip-at-startup</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 设置截图保存的路径，null将会禁止保存到磁盘</span><br><span class="line">screenshot-path <span class="string">&quot;~/Pictures/ScreenShot/%Y-%m-%d %H-%M-%S.png&quot;</span></span><br><span class="line"></span><br><span class="line">// 忽略软件自带的装饰(例如标题栏)</span><br><span class="line">prefer-no-csd</span><br><span class="line"></span><br><span class="line">// 指定光标的主题和大小，打字时隐藏光标</span><br><span class="line">cursor &#123;</span><br><span class="line">    // xcursor-theme <span class="string">&quot;Dracula-cursors&quot;</span></span><br><span class="line">    xcursor-theme <span class="string">&quot;breeze&quot;</span></span><br><span class="line">    xcursor-size 24</span><br><span class="line">    hide-when-typing</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 使用`niri msg windows`查看Title和App ID等信息</span><br><span class="line">window-rule &#123;</span><br><span class="line">    open-on-output <span class="string">&quot;eDP-2&quot;</span></span><br><span class="line">    // default-window-height &#123; proportion 0.9; &#125;</span><br><span class="line">    // default-floating-position x=100 y=200 relative-to=<span class="string">&quot;bottom-left&quot;</span></span><br><span class="line">    // default-column-width &#123; proportion 0.7556; &#125;</span><br><span class="line">    geometry-corner-radius 20</span><br><span class="line">    clip-to-geometry <span class="literal">true</span></span><br><span class="line">    border &#123;</span><br><span class="line">        // off</span><br><span class="line">        on</span><br><span class="line">        width 4</span><br><span class="line">        active-gradient from=<span class="string">&quot;#bd93f9&quot;</span> to=<span class="string">&quot;#94b9fa&quot;</span> angle=135</span><br><span class="line">        inactive-color <span class="string">&quot;#505050&quot;</span></span><br><span class="line">        urgent-color <span class="string">&quot;#9b0000&quot;</span></span><br><span class="line">        // active-gradient from=<span class="string">&quot;#80c8ff&quot;</span> to=<span class="string">&quot;#bbddff&quot;</span> angle=45</span><br><span class="line">        // inactive-gradient from=<span class="string">&quot;#505050&quot;</span> to=<span class="string">&quot;#808080&quot;</span> angle=45 relative-to=<span class="string">&quot;workspace-view&quot;</span></span><br><span class="line">        // urgent-gradient from=<span class="string">&quot;#800&quot;</span> to=<span class="string">&quot;#a33&quot;</span> angle=45</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    focus-ring&#123;</span><br><span class="line">        off</span><br><span class="line">    &#125;</span><br><span class="line">    // opacity 0.75</span><br><span class="line">&#125;</span><br><span class="line">window-rule &#123;</span><br><span class="line">    open-on-output <span class="string">&quot;eDP-2&quot;</span></span><br><span class="line">    match app-id=<span class="string">&quot;scrcpy&quot;</span></span><br><span class="line">    default-column-width &#123; proportion 0.2444; &#125;</span><br><span class="line">&#125;</span><br><span class="line">window-rule &#123;</span><br><span class="line">    open-on-output <span class="string">&quot;eDP-2&quot;</span></span><br><span class="line">    match app-id=r#<span class="string">&quot;chrome&quot;</span>#</span><br><span class="line">    default-column-width &#123; proportion 0.8; &#125;</span><br><span class="line">    // border &#123;</span><br><span class="line">    //    on</span><br><span class="line">    //    width 4</span><br><span class="line">    //    active-color <span class="string">&quot;#61AFEF&quot;</span></span><br><span class="line">    // &#125;</span><br><span class="line">    // open-focused <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">window-rule &#123;</span><br><span class="line">    match app-id=<span class="string">&quot;com.gabm.satty&quot;</span> title=<span class="string">&quot;satty&quot;</span></span><br><span class="line">    border &#123;</span><br><span class="line">        on</span><br><span class="line">        width 2</span><br><span class="line">        active-color <span class="string">&quot;#61AFEF&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// `niri msg layers`显示有namespace可以在这里配置waybar透明度</span><br><span class="line">layer-rule &#123;</span><br><span class="line">    match namespace=<span class="string">&quot;^quickshell-overview$&quot;</span></span><br><span class="line">    place-within-backdrop <span class="literal">true</span></span><br><span class="line">    //     opacity 0.75</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Put swaybg inside the overview backdrop.</span><br><span class="line">layer-rule &#123;</span><br><span class="line">    match namespace=<span class="string">&quot;^wallpaper$&quot;</span></span><br><span class="line">    place-within-backdrop <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">debug &#123;</span><br><span class="line">    honor-xdg-activation-with-invalid-serial</span><br><span class="line">&#125;</span><br><span class="line">// 禁用鼠标左上角热脚</span><br><span class="line">gestures &#123;</span><br><span class="line">    hot-corners &#123;</span><br><span class="line">        // off</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">animations &#123;</span><br><span class="line">    // Uncomment to turn off all animations.</span><br><span class="line">    // You can also put <span class="string">&quot;off&quot;</span> into each individual animation to <span class="built_in">disable</span> it.</span><br><span class="line">    // off</span><br><span class="line"></span><br><span class="line">    // Slow down all animations by this <span class="built_in">factor</span>. Values below 1 speed them up instead.</span><br><span class="line">    // slowdown 3.0</span><br><span class="line"></span><br><span class="line">    // Individual animations.</span><br><span class="line"></span><br><span class="line">    workspace-switch &#123;</span><br><span class="line">        spring damping-ratio=1.0 stiffness=1000 epsilon=0.0001</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    window-open &#123;</span><br><span class="line">        duration-ms 150</span><br><span class="line">        curve <span class="string">&quot;ease-out-expo&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    window-close &#123;</span><br><span class="line">        duration-ms 150</span><br><span class="line">        curve <span class="string">&quot;ease-out-quad&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    horizontal-view-movement &#123;</span><br><span class="line">        spring damping-ratio=1.0 stiffness=800 epsilon=0.0001</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    window-movement &#123;</span><br><span class="line">        spring damping-ratio=1.0 stiffness=800 epsilon=0.0001</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    window-resize &#123;</span><br><span class="line">        spring damping-ratio=1.0 stiffness=800 epsilon=0.0001</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    config-notification-open-close &#123;</span><br><span class="line">        spring damping-ratio=0.6 stiffness=1000 epsilon=0.001</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    exit-confirmation-open-close &#123;</span><br><span class="line">        spring damping-ratio=0.6 stiffness=500 epsilon=0.01</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    screenshot-ui-open &#123;</span><br><span class="line">        duration-ms 200</span><br><span class="line">        curve <span class="string">&quot;ease-out-quad&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    overview-open-close &#123;</span><br><span class="line">        spring damping-ratio=1.0 stiffness=800 epsilon=0.0001</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>快捷键很多，自行查看，有空再补。</p>
<p>这里我们使用 Hyprlock 锁屏</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~/.config/hypr</span><br><span class="line">├── hyprlock.conf</span><br><span class="line">└── mocha</span><br><span class="line">    └── mocha.conf</span><br></pre></td></tr></table></figure>

<p>建造这样的目录结构</p>
<p>然后备份你原来的 <code>~/.config/hypr/hyprlock.conf</code> ，并填成如下配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> = <span class="variable">$HOME</span>/.config/hypr/mocha/mocha.conf</span><br><span class="line"></span><br><span class="line"><span class="variable">$accent</span> = <span class="variable">$mauve</span></span><br><span class="line"><span class="variable">$accentAlpha</span> = <span class="variable">$mauveAlpha</span></span><br><span class="line"><span class="variable">$font</span> = JetBrains Mono</span><br><span class="line"></span><br><span class="line"><span class="comment"># GENERAL</span></span><br><span class="line">general &#123;</span><br><span class="line">  hide_cursor = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># BACKGROUND</span></span><br><span class="line">background &#123;</span><br><span class="line">  monitor =</span><br><span class="line">  path = /path/to/your/lock/screen/wallpaper.png</span><br><span class="line">  blur_passes = 2</span><br><span class="line">  color = <span class="variable">$base</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># LAYOUT</span></span><br><span class="line">label &#123;</span><br><span class="line">  monitor =</span><br><span class="line">  text = 键盘布局: <span class="variable">$LAYOUT</span></span><br><span class="line">  color = <span class="variable">$text</span></span><br><span class="line">  font_size = 25</span><br><span class="line">  font_family = <span class="variable">$font</span></span><br><span class="line">  position = 30, -30</span><br><span class="line">  halign = left</span><br><span class="line">  valign = top</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># TIME</span></span><br><span class="line">label &#123;</span><br><span class="line">  monitor =</span><br><span class="line">  text = <span class="variable">$TIME</span></span><br><span class="line">  color = <span class="variable">$text</span></span><br><span class="line">  font_size = 90</span><br><span class="line">  font_family = <span class="variable">$font</span></span><br><span class="line">  position = -30, 0</span><br><span class="line">  halign = right</span><br><span class="line">  valign = top</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># DATE</span></span><br><span class="line">label &#123;</span><br><span class="line">  monitor =</span><br><span class="line">  text = cmd[update:43200000] <span class="built_in">date</span> +<span class="string">&quot;%Y年 %m月 %d日, %A&quot;</span></span><br><span class="line">  color = <span class="variable">$text</span></span><br><span class="line">  font_size = 25</span><br><span class="line">  font_family = <span class="variable">$font</span></span><br><span class="line">  position = -30, -150</span><br><span class="line">  halign = right</span><br><span class="line">  valign = top</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># FINGERPRINT</span></span><br><span class="line">&#123;</span><br><span class="line">  monitor = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  text = <span class="string">&quot;<span class="variable">$FPRINTPROMPT</span>&quot;</span>;</span><br><span class="line">  color = <span class="string">&quot;<span class="variable">$text</span>&quot;</span>;</span><br><span class="line">  font_size = 14;</span><br><span class="line">  font_family = <span class="variable">$font</span>;</span><br><span class="line">  position = <span class="string">&quot;0, -107&quot;</span>;</span><br><span class="line">  halign = <span class="string">&quot;center&quot;</span>;</span><br><span class="line">  valign = <span class="string">&quot;center&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># USER AVATAR</span></span><br><span class="line">image &#123;</span><br><span class="line">  monitor =</span><br><span class="line">  path = <span class="variable">$HOME</span>/.face</span><br><span class="line">  <span class="comment"># size = 100</span></span><br><span class="line">  size = 200</span><br><span class="line">  border_color = <span class="variable">$accent</span></span><br><span class="line">  position = 0, 90</span><br><span class="line">  <span class="comment"># position = 0, 75</span></span><br><span class="line">  halign = center</span><br><span class="line">  valign = center</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># INPUT FIELD</span></span><br><span class="line">input-field &#123;</span><br><span class="line">  monitor =</span><br><span class="line">  size = 300, 60</span><br><span class="line">  outline_thickness = 4</span><br><span class="line">  dots_size = 0.2</span><br><span class="line">  dots_spacing = 0.2</span><br><span class="line">  dots_center = <span class="literal">true</span></span><br><span class="line">  outer_color = <span class="variable">$accent</span></span><br><span class="line">  inner_color = <span class="variable">$surface0</span></span><br><span class="line">  font_color = <span class="variable">$text</span></span><br><span class="line">  fade_on_empty = <span class="literal">false</span></span><br><span class="line">  <span class="comment"># placeholder_text = &lt;span foreground=&quot;##$textAlpha&quot;&gt;&lt;i&gt;󰌾 Logged in as &lt;/i&gt;&lt;span foreground=&quot;##$accentAlpha&quot;&gt;$USER&lt;/span&gt;&lt;/span&gt;</span></span><br><span class="line">  placeholder_text = &lt;span foreground=<span class="string">&quot;##<span class="variable">$textAlpha</span>&quot;</span>&gt;󰌾 &lt;span foreground=<span class="string">&quot;##<span class="variable">$accentAlpha</span>&quot;</span>&gt;<span class="variable">$USER</span>&lt;/span&gt; 已登录 &lt;/span&gt;</span><br><span class="line">  hide_input = <span class="literal">false</span></span><br><span class="line">  check_color = <span class="variable">$accent</span></span><br><span class="line">  fail_color = <span class="variable">$red</span></span><br><span class="line">  fail_text = &lt;i&gt; 已失败 &lt;b&gt;(<span class="variable">$ATTEMPTS</span>)&lt;/b&gt; 次 &lt;/i&gt;</span><br><span class="line">  capslock_color = <span class="variable">$yellow</span></span><br><span class="line">  <span class="comment"># position = 0, -47</span></span><br><span class="line">  position = 0, -80</span><br><span class="line">  halign = center</span><br><span class="line">  valign = center</span><br></pre></td></tr></table></figure>

<p>并请复制一份你的头像到 <code>~/.face</code>。（注意：是创建一个<code>.face</code>文件，而不是在 <code>.face</code> 文件夹里面放上自己的头像图片！）<br>同理操作<code>~/.config/hypr/mocha/mocha.conf</code>，填入以下配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$rosewater</span> = rgb(f5e0dc)</span><br><span class="line"><span class="variable">$rosewaterAlpha</span> = f5e0dc</span><br><span class="line"></span><br><span class="line"><span class="variable">$flamingo</span> = rgb(f2cdcd)</span><br><span class="line"><span class="variable">$flamingoAlpha</span> = f2cdcd</span><br><span class="line"></span><br><span class="line"><span class="variable">$pink</span> = rgb(f5c2e7)</span><br><span class="line"><span class="variable">$pinkAlpha</span> = f5c2e7</span><br><span class="line"></span><br><span class="line"><span class="variable">$mauve</span> = rgb(cba6f7)</span><br><span class="line"><span class="variable">$mauveAlpha</span> = cba6f7</span><br><span class="line"></span><br><span class="line"><span class="variable">$red</span> = rgb(f38ba8)</span><br><span class="line"><span class="variable">$redAlpha</span> = f38ba8</span><br><span class="line"></span><br><span class="line"><span class="variable">$maroon</span> = rgb(eba0ac)</span><br><span class="line"><span class="variable">$maroonAlpha</span> = eba0ac</span><br><span class="line"></span><br><span class="line"><span class="variable">$peach</span> = rgb(fab387)</span><br><span class="line"><span class="variable">$peachAlpha</span> = fab387</span><br><span class="line"></span><br><span class="line"><span class="variable">$yellow</span> = rgb(f9e2af)</span><br><span class="line"><span class="variable">$yellowAlpha</span> = f9e2af</span><br><span class="line"></span><br><span class="line"><span class="variable">$green</span> = rgb(a6e3a1)</span><br><span class="line"><span class="variable">$greenAlpha</span> = a6e3a1</span><br><span class="line"></span><br><span class="line"><span class="variable">$teal</span> = rgb(94e2d5)</span><br><span class="line"><span class="variable">$tealAlpha</span> = 94e2d5</span><br><span class="line"></span><br><span class="line"><span class="variable">$sky</span> = rgb(89dceb)</span><br><span class="line"><span class="variable">$skyAlpha</span> = 89dceb</span><br><span class="line"></span><br><span class="line"><span class="variable">$sapphire</span> = rgb(74c7ec)</span><br><span class="line"><span class="variable">$sapphireAlpha</span> = 74c7ec</span><br><span class="line"></span><br><span class="line"><span class="variable">$blue</span> = rgb(89b4fa)</span><br><span class="line"><span class="variable">$blueAlpha</span> = 89b4fa</span><br><span class="line"></span><br><span class="line"><span class="variable">$lavender</span> = rgb(b4befe)</span><br><span class="line"><span class="variable">$lavenderAlpha</span> = b4befe</span><br><span class="line"></span><br><span class="line"><span class="variable">$text</span> = rgb(cdd6f4)</span><br><span class="line"><span class="comment">#$text = rgb(6c8cf5)</span></span><br><span class="line"><span class="comment">#$textAlpha = 6c8cf5</span></span><br><span class="line"><span class="variable">$textAlpha</span> = cdd6f4</span><br><span class="line"></span><br><span class="line"><span class="variable">$subtext1</span> = rgb(bac2de)</span><br><span class="line"><span class="variable">$subtext1Alpha</span> = bac2de</span><br><span class="line"></span><br><span class="line"><span class="variable">$subtext0</span> = rgb(a6adc8)</span><br><span class="line"><span class="variable">$subtext0Alpha</span> = a6adc8</span><br><span class="line"></span><br><span class="line"><span class="variable">$overlay2</span> = rgb(9399b2)</span><br><span class="line"><span class="variable">$overlay2Alpha</span> = 9399b2</span><br><span class="line"></span><br><span class="line"><span class="variable">$overlay1</span> = rgb(7f849c)</span><br><span class="line"><span class="variable">$overlay1Alpha</span> = 7f849c</span><br><span class="line"></span><br><span class="line"><span class="variable">$overlay0</span> = rgb(6c7086)</span><br><span class="line"><span class="variable">$overlay0Alpha</span> = 6c7086</span><br><span class="line"></span><br><span class="line"><span class="variable">$surface2</span> = rgb(585b70)</span><br><span class="line"><span class="variable">$surface2Alpha</span> = 585b70</span><br><span class="line"></span><br><span class="line"><span class="variable">$surface1</span> = rgb(45475a)</span><br><span class="line"><span class="variable">$surface1Alpha</span> = 45475a</span><br><span class="line"></span><br><span class="line"><span class="variable">$surface0</span> = rgb(313244)</span><br><span class="line"><span class="variable">$surface0Alpha</span> = 313244</span><br><span class="line"></span><br><span class="line"><span class="variable">$base</span> = rgb(1e1e2e)</span><br><span class="line"><span class="variable">$baseAlpha</span> = 1e1e2e</span><br><span class="line"></span><br><span class="line"><span class="variable">$mantle</span> = rgb(181825)</span><br><span class="line"><span class="variable">$mantleAlpha</span> = 181825</span><br><span class="line"></span><br><span class="line"><span class="variable">$crust</span> = rgb(11111b)</span><br><span class="line"><span class="variable">$crustAlpha</span> = 11111b</span><br></pre></td></tr></table></figure>
<p>颜色可以自己改</p>
<p>如果你尝试，你会发现你登录的时候要输入两次密码，这不妙，所以我们设置自动登录，这样就只用一次密码</p>
<p>操作<code>/etc/sddm.conf.d/autologin.conf</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Autologin]</span><br><span class="line">User=#your_username</span><br><span class="line">Session=niri</span><br></pre></td></tr></table></figure>
<p>好了，可以重启进入 Niri 了，自行探索吧</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2026-01-27</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://blog.qaaxaap.living/2026/01/27/Niri-简明教程/,Qaaxaap,Niri 简明教程,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2026/01/08/Hello2026%EF%BC%81/" title="Hello2026！">下一篇</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script>// 动态加载 Valine
(function() {
  // 配置对象
  var config = {
    el: '#vcomments',
    appId: 'zdN4S5P4rfRUY13ZmRaKuQMj-gzGzoHsz',
    appKey: 'T64CwVqv5rXWUQUnGarOEUbm',
    // 关键：必须添加 serverURLs
    serverURLs: 'https://zdn4s5p4.lc-cn-n1-shared.com',
    notify: false || false,
    verify: false || false,
    placeholder: '发一条友善的评论',
    path: window.location.pathname,
    avatar: 'mm',
    visitor: true,
    highlight: true,
    recordIP: true
  };
  
  // 加载 Valine
  function loadValine() {
    // 检查是否已加载
    if (typeof Valine !== 'undefined') {
      initValine();
      return;
    }
    
    // 使用官方 CDN
    var script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/valine@1.5.3/dist/Valine.min.js';
    script.async = true;
    
    script.onload = function() {
      console.log('Valine 1.5.3 加载成功');
      setTimeout(initValine, 100);
    };
    
    script.onerror = function() {
      console.warn('主 CDN 失败，尝试备用源');
      var backupScript = document.createElement('script');
      backupScript.src = 'https://unpkg.com/valine@1.5.3/dist/Valine.min.js';
      backupScript.onload = initValine;
      document.head.appendChild(backupScript);
    };
    
    document.head.appendChild(script);
  }
  
  function initValine() {
    if (typeof Valine === 'undefined') {
      console.error('Valine 未加载成功');
      return;
    }
    
    try {
      new Valine(config);
      console.log('Valine 初始化成功');
    } catch (error) {
      console.error('Valine 初始化失败:', error);
    }
  }
  
  // 页面加载完成后执行
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadValine);
  } else {
    loadValine();
  }
})();</script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>